heat_template_version: 2015-10-15

description: >
  userdata : userdata config custom

parameters:
  destfile:
    type: string
  ansible_config:
    type: string
    label: ansible_config
    description: ansible_config

resources:
  userdata:
    type: OS::Heat::CloudConfig
    properties:
      cloud_config:
        merge_how: 'list(append)+dict(recurse_array)+str()'
        write_files:
        - path: { get_param: destfile }
          content:
            get_file: ../config/100-ansible-env.yaml
          owner: root:root
          permissions: '0750'
outputs:
  userdata:
    value: { get_resource: userdata }
